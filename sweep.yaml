gha_enabled: True
branch: main
blocked_dirs: [".github/", "other_dir"]
draft: False
description: "sweepai/sweep is a python 3.10 project. The main api endpoints are in sweepai/api.py. Write code that adheres to PEP8."

docs:
  - Modal: ["https://modal.com/docs/reference", "Modal is used for serverless deployment"]
  - PyGitHub: ["https://pygithub.readthedocs.io/en/latest/", "PyGitHub is used for interacting with GitHub"]

sandbox:
  install:
    - pre-commit install
    - pip install poetry
    - poetry install
  check:
    - pre-commit run --files {file_path}
    - 'if [[ "{file_path}" == *.py ]]; then poetry run pylint --errors-only {file_path}; else exit 0; fi'
    - 'if [[ "{file_path}" == *.py ]]; then PYTHONPATH=. poetry run python {file_path}; else exit 0; fi'

rules:
- "Leftover TODOs in the code should be handled."
- "All new business logic should have corresponding unit tests in the tests/ directory."
- "Any clearly inefficient or repeated code should be optimized or refactored."
- "All React components should have PropTypes defined."
- "Update the README.md file whenever a new feature is added. Make sure to include a description of the feature and any new commands."
- "Remove any console.log statements before committing JavaScript code."
- "All docstrings and comments should be up to date."
- "Python error logs should use loguru. If they are under an exception, they should use traceback."
- "We use unit tests for our code. If we have "class.py", we should have "class_test.py" in the same directory."

# Next.js 14 Specific Rules
- "Migrate existing page components to the new app directory, aligning with Next.js 14's App Router feature. Ensure proper nesting within the app layout."
- "Update _app.tsx to import and utilize the centralized Layout component from the app directory."
- "Refactor pages to remove redundant component imports, integrating them into the centralized Layout component."
- "Ensure next.config.js is updated to support Next.js 14 features, with a focus on the App Router configuration."
- "Conduct comprehensive testing post-migration to confirm correct routing and page rendering with the new App Router."
- "Document all changes and the migration process, providing clear guidance on the new structure and routing system."
